<div class="row">
    <div class="col-12" *ngIf="travelExpense$ | async as travelExpense; else loading">


        <h2>Redigering af afregning</h2>

        <form [formGroup]="travelExpenseForm">
            <app-travel-expense-form #travelExpenseFormComponent formControlName="travelExpense"></app-travel-expense-form>
        </form>


        <div class="card my-2">
            <div class="card-body">

                <div class="row pt-3" *ngIf="travelExpense && travelExpense.allowedFlows && !travelExpenseIsMoved">
                    <div class="col-3"><p>Ryk afregning til ny stadie:</p></div>
                    <div class="col" *ngFor="let allowedFlow of travelExpense.allowedFlows">
                        <button class="btn btn-primary" (click)="moveToFlowStep(travelExpense, allowedFlow)">{{ allowedFlow.description }}</button>
                    </div>
                </div>

                <div *ngIf="travelExpenseIsMoved">Afregningen er rykket til n√¶ste stadie</div>
            </div>
        </div>

        <div class="row pt-3">
            <div class="col text-right">
                <button class="btn btn-primary" type="button" (click)="save()">Gem afregning</button>
            </div>
        </div>

        <small>
            <div>
                Info til fejlfinding:
<!--<pre>
Valid: {{ travelExpenseForm.valid}}
{{ travelExpenseForm.getRawValue() | json}}

</pre>-->
            </div>
        </small>


    </div>
</div>


<ng-template #loading>Henter data</ng-template>
